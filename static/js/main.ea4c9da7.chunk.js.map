{"version":3,"sources":["components/Spinner.js","utils/crawler.js","data/members.js","App.js","index.js"],"names":["useStyles","makeStyles","styledProgress","color","Spinner","styled","div","LoadingMask","isLoading","classes","style","display","Fade","in","transitionDuration","unmountOnExit","CircularProgress","root","getPostCount","res","text","cheerio","load","data","$","split","filter","i","length","Number","crawler","url","a","axios","get","count","members","AppContainer","TitleContainer","TeamName","Days","LinkToPage","TableWrapper","table","width","header","backgroundColor","headerCell","fontFamily","fontWeight","cell","drow","height","initData","reduce","dataRefactored","curr","name","concat","postCount","Infinity","START_DATE","Date","App","useState","setData","setIsLoading","now","diff","Math","floor","useEffect","queue","forEach","member","then","push","interval","setInterval","clearInterval","shift","newData","index","findIndex","m","newMemberData","unit","TableContainer","component","Paper","className","Table","size","aria-label","TableHead","TableRow","TableCell","align","TableBody","sort","b","localeCompare","sortData","map","key","scope","href","target","rel","isFinite","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ea4c9da7.chunk.js","sourcesContent":["import { CircularProgress } from '@material-ui/core';\nimport Fade from '@material-ui/core/Fade';\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport styled from 'styled-components';\n\nconst useStyles = makeStyles({\n  styledProgress: {\n    color: 'rgb(255, 102, 0)',\n  },\n});\nconst Spinner = styled.div`\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0%;\n  bottom: 0;\n  left: 0%;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.25);\n  z-index: 999;\n`;\n\nconst LoadingMask = ({ isLoading }) => {\n  const classes = useStyles();\n\n  return (\n    <Spinner style={{ display: isLoading ? 'flex' : 'none' }}>\n      <Fade\n        in={isLoading}\n        style={{\n          transitionDuration: 500,\n        }}\n        unmountOnExit\n      >\n        <CircularProgress classes={{ root: classes.styledProgress }} />\n      </Fade>\n    </Spinner>\n  );\n};\n\nexport default LoadingMask;\n","import axios from 'axios'\nimport cheerio from 'cheerio'\n\nconst crawler = async (url) => {\n  const res = await axios.get(url)\n  const count = getPostCount(res)\n  return count\n}\n\nfunction getPostCount(res) {\n  const $ = cheerio.load(res.data)\n  let text = $('.subscription-group').text()\n  text = text.split(' ')\n  text = text.filter(i => i.length > 0 && i[0] !== '\\n')\n  return Number(text[5])\n}\n\nexport default crawler\n","const members = [\n  [\"td\", \"https://ithelp.ithome.com.tw/users/20116003/ironman/2935\"],\n  [\"Yenting\", \"https://ithelp.ithome.com.tw/users/20120822/ironman/3061\"],\n  [\"Jayne\", \"https://ithelp.ithome.com.tw/users/20128754/ironman/2954\"],\n  [\"SML\", \"https://ithelp.ithome.com.tw/users/20129007/ironman/2962\"],\n  [\"Victor\", \"https://ithelp.ithome.com.tw/users/20113462/ironman/2977\"],\n  [\"Wesley\", \"https://ithelp.ithome.com.tw/users/20107303/ironman/2980\"],\n  [\"Kent\", \"https://ithelp.ithome.com.tw/users/20129231/ironman/3028\"],\n  [\"Ellen\", \"https://ithelp.ithome.com.tw/users/20129237/ironman/3030\"],\n  [\"Bernard\", \"https://ithelp.ithome.com.tw/users/20129249/ironman/3034\"],\n  [\"Emily\", \"https://ithelp.ithome.com.tw/users/20128928/ironman/3035\"],\n  [\"Grant\", \"https://ithelp.ithome.com.tw/users/20128925/ironman/3037\"],\n  [\"Rafeni\", \"https://ithelp.ithome.com.tw/users/20129163/ironman/3038\"],\n  [\"Walter\", \"https://ithelp.ithome.com.tw/users/20128931/ironman/3039\"],\n  [\"Jasper\", \"https://ithelp.ithome.com.tw/users/20128902/ironman/3045\"],\n  [\"gigd123\", \"https://ithelp.ithome.com.tw/users/20129269/ironman/3050\"],\n  [\"Danny\", \"https://ithelp.ithome.com.tw/users/20129072/ironman/3052\"],\n  [\"lagagain\", \"https://ithelp.ithome.com.tw/users/20112470/ironman/3058\"],\n  [\"Sean\", \"https://ithelp.ithome.com.tw/users/20129306/ironman/3071\"],\n  [\"Kaleb\", \"https://ithelp.ithome.com.tw/users/20129427/ironman/3116\"],\n  [\"Zarek\", \"https://ithelp.ithome.com.tw/users/20103425/ironman/3143\"],\n  [\"shizuku\", \"https://ithelp.ithome.com.tw/users/20129636/ironman/3382\"],\n  [\"Sam\", \"https://ithelp.ithome.com.tw/users/20130041/ironman/3413\"],\n  [\"Dez\", \"https://ithelp.ithome.com.tw/users/20107572/ironman/3457\"],\n];\n\nexport default members;\n","import React, { useEffect, useState } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\n\nimport Moment from 'react-moment';\nimport Paper from '@material-ui/core/Paper';\nimport Spinner from './components/Spinner';\nimport crawler from './utils/crawler';\nimport { makeStyles } from '@material-ui/core/styles';\nimport members from './data/members';\nimport styled from 'styled-components';\n\nconst AppContainer = styled.div`\n  width: 100%;\n  display: flex;\n  position: relative;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  background-color: #282c34;\n  color: #ffffff;\n`;\nconst TitleContainer = styled.div`\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  height: 100px;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: #282c34;\n  padding: 20px;\n`;\nconst TeamName = styled.div`\n  font-size: 30px;\n  font-weight: 700;\n`;\nconst Days = styled.div`\n  padding: 10px;\n  font-size: 20px;\n  font-weight: 700;\n`;\nconst LinkToPage = styled.div`\n  a {\n    color: #000000;\n    text-decoration: none;\n    :hover {\n      color: blue;\n    }\n  }\n`;\nconst TableWrapper = styled.div`\n  width: 50%;\n  margin-top: 100px;\n  border: 1px solid #ffffff;\n  border-radius: 4px;\n  margin-bottom: 50px;\n`;\n\nconst useStyles = makeStyles({\n  table: {\n    width: '100%',\n  },\n  header: {\n    backgroundColor: '#333333',\n  },\n  headerCell: {\n    color: '#ffffff',\n    fontFamily: 'Source Code Pro',\n    fontWeight: '700',\n  },\n  cell: {\n    fontFamily: 'Source Code Pro',\n    fontWeight: '700',\n  },\n  drow: {\n    backgroundColor: '#ffcbcb',\n  },\n  styledProgress: {\n    color: '#282c34',\n    height: '20px !important',\n    width: '20px !important',\n  },\n});\n\nconst sortData = (data) => {\n  return data.sort((a, b) => {\n    if (a.postCount === b.postCount) {\n      return a.name.localeCompare(b.name);\n    } else {\n      return a.postCount - b.postCount;\n    }\n  });\n};\n\nconst initData = members.reduce((dataRefactored, curr) => {\n  const [name, url] = curr;\n  return dataRefactored.concat({\n    name,\n    url,\n    postCount: Infinity,\n  });\n}, []);\n\nconst START_DATE = new Date('2020-09-13T00:00:00.000+08:00');\n\nconst App = () => {\n  const classes = useStyles();\n  const [data, setData] = useState(initData);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // get days\n  const now = new Date();\n  const diff = Math.floor((now - START_DATE) / 86400000);\n\n  useEffect(() => {\n    if (data.length === 0) {\n      return;\n    }\n    const queue = [];\n    data.forEach((member) => {\n      const { url, name } = member;\n      crawler(url).then((postCount) => {\n        queue.push({ name, postCount });\n      });\n    });\n    let count = 0;\n    const interval = setInterval(() => {\n      if (count >= data.length) {\n        return clearInterval(interval);\n      }\n      if (queue.length === 0) {\n        return setIsLoading(true);\n      }\n      setIsLoading(false);\n      const { postCount, name } = queue.shift();\n      count++;\n      setData((data) => {\n        const newData = [...data];\n        const index = newData.findIndex((m) => m.name === name);\n        const newMemberData = { ...newData[index] };\n        newMemberData.postCount = Number(postCount);\n        newData[index] = newMemberData;\n        return newData;\n      });\n    }, 200);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (\n    <AppContainer>\n      <Spinner isLoading={isLoading} />\n      <TitleContainer>\n        <TeamName>#OutcomeFirst</TeamName>\n        <Days>\n          開賽第\n          <Moment diff=\"2020-09-13\" unit=\"days\">\n            {new Date()}\n          </Moment>\n          天\n        </Days>\n      </TitleContainer>\n      {data.length > 0 && (\n        <TableWrapper>\n          <TableContainer component={Paper} className={classes.table}>\n            <Table size=\"small\" aria-label=\"a dense table\">\n              <TableHead className={classes.header}>\n                <TableRow>\n                  <TableCell className={classes.headerCell}>Name</TableCell>\n                  <TableCell align=\"right\" className={classes.headerCell}>\n                    Posts\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {sortData(data).map(({ name, url, postCount }) => (\n                  <TableRow\n                    key={name}\n                    className={\n                      diff === Number(postCount)\n                        ? null\n                        : postCount\n                        ? classes.drow\n                        : null\n                    }\n                  >\n                    <TableCell\n                      component=\"th\"\n                      scope=\"row\"\n                      className={classes.cell}\n                    >\n                      <LinkToPage>\n                        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {name}\n                        </a>\n                      </LinkToPage>\n                    </TableCell>\n                    <TableCell align=\"right\" className={classes.cell}>\n                      {Number.isFinite(postCount) ? postCount : '--'}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TableWrapper>\n      )}\n    </AppContainer>\n  );\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}